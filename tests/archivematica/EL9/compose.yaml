---
name: archivematica-el9-testing

services:

  archivematica:
    build:
      context: "."
      dockerfile: "../Dockerfile"
      args:
        DOCKER_IMAGE_NAME: "${DOCKER_IMAGE_NAME:-rockylinux}"
        DOCKER_IMAGE_TAG: "${DOCKER_IMAGE_TAG:-9}"
        TARGET: server
    # The nginx configuration files included in the package specs reference
    # this hostname in their proxy_pass.
    extra_hosts:
      - "localhost4:127.0.0.1"
    ports:
      - "2222:22"
      - "8000:80"
      - "8001:8000"
    volumes:
      - ".:/src"
      - "../../../:/am-packbuild"
